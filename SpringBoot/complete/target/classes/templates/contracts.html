<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Danh sách hợp đồng thuê phòng</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Danh sách hợp đồng thuê phòng</h2>
        <a th:href="@{/admin/dashboard}" class="btn btn-secondary">Quay về trang chủ</a>
    </div>
    <a th:href="@{/contracts/add}" class="btn btn-success mb-3">Thêm hợp đồng mới</a>
    <div class="table-responsive">
        <table class="table table-bordered table-hover bg-white">
            <thead class="table-dark">
                <tr>
                    <th>Mã hợp đồng</th>
                    <th>Sinh viên</th>
                    <th>Phòng</th>
                    <th>Ngày bắt đầu</th>
                    <th>Ngày kết thúc</th>
                    <th>Tiền cọc</th>
                    <th>Trạng thái</th>
                    <th>Ghi chú</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="c : ${contracts}">
                    <td th:text="${c.contractId}"></td>
                    <td th:text="${c.student != null ? c.student.name : ''}"></td>
                    <td th:text="${c.dormRoom != null ? c.dormRoom.roomName : ''}"></td>
                    <td th:text="${c.startDate}"></td>
                    <td th:text="${c.endDate}"></td>
                    <td th:text="${#numbers.formatInteger(c.deposit, 0, 'COMMA') + ' VNĐ'}"></td>
                    <td th:text="${c.status}"></td>
                    <td th:text="${c.note}"></td>
                    <td>
                        <a th:href="@{'/contracts/edit/' + ${c.contractId}}" class="btn btn-sm btn-warning">Sửa</a>
                        <a th:href="@{'/contracts/delete/' + ${c.contractId}}" class="btn btn-sm btn-danger"
                           onclick="return confirm('Bạn có chắc muốn xóa hợp đồng này?');">Xóa</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>